<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HamPuff SMS API - Help & Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: #1a1a1a;
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .nav-links {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .nav-links a {
            color: #0066cc;
            text-decoration: none;
            margin-right: 1.5rem;
            font-weight: 500;
        }
        
        .nav-links a:hover {
            text-decoration: underline;
        }
        
        section {
            background: white;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        h2 {
            color: #1a1a1a;
            font-size: 2rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid #0066cc;
        }
        
        h3 {
            color: #333;
            font-size: 1.5rem;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }
        
        h4 {
            color: #555;
            font-size: 1.2rem;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .endpoint {
            background: #f8f9fa;
            border-left: 4px solid #0066cc;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }
        
        .method {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9rem;
            margin-right: 0.5rem;
        }
        
        .method.get {
            background: #61affe;
            color: white;
        }
        
        .method.post {
            background: #49cc90;
            color: white;
        }
        
        .path {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 1rem;
            color: #333;
        }
        
        .timezone-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.5rem;
            margin: 1rem 0;
        }
        
        .timezone-item {
            background: #f8f9fa;
            padding: 0.5rem;
            border-radius: 4px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
        }
        
        code {
            background: #f4f4f4;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            margin: 1rem 0;
        }
        
        pre code {
            background: none;
            padding: 0;
            color: inherit;
        }
        
        .alert {
            padding: 1rem;
            border-radius: 4px;
            margin: 1rem 0;
        }
        
        .alert.info {
            background: #e7f3ff;
            border-left: 4px solid #0066cc;
        }
        
        .alert.warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
        }
        
        .alert.success {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        
        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: #f8f9fa;
            font-weight: 600;
        }
        
        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 3px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .badge.rate-limit {
            background: #ffc107;
            color: #000;
        }
        
        footer {
            text-align: center;
            padding: 2rem;
            color: #666;
            margin-top: 3rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>ðŸ“¡ HamPuff SMS API</h1>
            <p>Ham Radio Solar Propagation Data & SMS Service API</p>
        </div>
    </header>
    
    <div class="container">
        <div class="nav-links">
            <a href="#overview">Overview</a>
            <a href="#propagation">Propagation Data</a>
            <a href="#registration">Registration</a>
            <a href="#timezones">Supported Timezones</a>
            <a href="#rate-limiting">Rate Limiting</a>
            <a href="#examples">Examples</a>
        </div>
        
        <section id="overview">
            <h2>API Overview</h2>
            <p>The HamPuff SMS API provides programmatic access to ham radio solar propagation data and SMS registration management.</p>
            
            <div class="alert info">
                <strong>Base URLs:</strong><br>
                Production: <code>https://sms.hampuff.com</code><br>
                Development: <code>https://sms-dev.hampuff.com</code><br>
                Local: <code>http://localhost:15015</code>
            </div>
            
            <h3>API Documentation</h3>
            <p>Interactive API documentation is available via:</p>
            <ul>
                <li><strong>Swagger UI:</strong> <a href="/api-docs/swagger">/api-docs/swagger</a></li>
                <li><strong>ReDoc:</strong> <a href="/api-docs/redoc">/api-docs/redoc</a></li>
            </ul>
            
            <h3>Response Formats</h3>
            <p>The API provides two response formats:</p>
            <ul>
                <li><strong>JSON API</strong> (<code>/sms/api/v1/</code>) - Returns structured JSON data, includes CORS headers</li>
                <li><strong>Plain Text API</strong> (<code>/sms/curl/v1/</code>) - Returns plain text responses, ideal for cURL scripts</li>
            </ul>
        </section>
        
        <section id="propagation">
            <h2>Solar Propagation Data</h2>
            <p>Get real-time solar propagation data for ham radio operators.</p>
            
            <div class="endpoint">
                <span class="method get">GET</span>
                <span class="path">/sms/api/v1/propagation/{timezone}</span>
            </div>
            <div class="endpoint">
                <span class="method get">GET</span>
                <span class="path">/sms/api/v1/prop/{timezone}</span>
                <p style="margin-top: 0.5rem; color: #666;">Alias for the propagation endpoint</p>
            </div>
            
            <h4>Parameters</h4>
            <table>
                <tr>
                    <th>Parameter</th>
                    <th>Location</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><code>timezone</code></td>
                    <td>Path</td>
                    <td>string</td>
                    <td>Timezone code (case-insensitive). See <a href="#timezones">Supported Timezones</a></td>
                </tr>
            </table>
            
            <h4>Response</h4>
            <pre><code>{
  "timezone": "EST",
  "timezone_name": "Eastern",
  "updated": "Mon 15 Jan 14:30",
  "data": {
    "solar_flux": "150",
    "a_index": "5",
    "k_index": "2",
    "sunspots": "120",
    "muf": "25.6",
    "xray": "B1.2",
    "solar_winds": "380 km/s"
  },
  "raw_updated_utc": "15 Jan 2024 1930 UTC"
}</code></pre>
            
            <div class="alert success">
                <strong>Rate Limit:</strong> <span class="badge rate-limit">100 requests/hour</span>
            </div>
        </section>
        
        <section id="registration">
            <h2>Registration & Opt-In/Out</h2>
            <p>Manage user registrations and SMS opt-in status.</p>
            
            <h3>Register New User</h3>
            <div class="endpoint">
                <span class="method post">POST</span>
                <span class="path">/sms/api/v1/register</span>
            </div>
            
            <p><strong>Required Fields:</strong> <code>full_name</code>, <code>call_sign</code>, <code>phone_number</code>, <code>opted_in</code></p>
            
            <h4>Request Body</h4>
            <pre><code>{
  "full_name": "John Doe",
  "call_sign": "W1ABC",
  "phone_number": "+15551234567",
  "opted_in": true
}</code></pre>
            
            <div class="alert warning">
                <strong>Note:</strong> All fields are required for A2P 10DLC compliance. Phone numbers are automatically normalized to E.164 format.
            </div>
            
            <div class="alert success">
                <strong>Rate Limit:</strong> <span class="badge rate-limit">10 requests/hour</span>
            </div>
            
            <h3>Opt-In Existing User</h3>
            <div class="endpoint">
                <span class="method post">POST</span>
                <span class="path">/sms/api/v1/start/{phone_number}</span>
            </div>
            <div class="endpoint">
                <span class="method post">POST</span>
                <span class="path">/sms/api/v1/register/{phone_number}</span>
                <p style="margin-top: 0.5rem; color: #666;">Alias for the start endpoint</p>
            </div>
            
            <p>Opts in a user who has already been registered. Will return 404 if user doesn't exist.</p>
            
            <div class="alert success">
                <strong>Rate Limit:</strong> <span class="badge rate-limit">20 requests/hour</span>
            </div>
            
            <h3>Opt-Out User</h3>
            <div class="endpoint">
                <span class="method post">POST</span>
                <span class="path">/sms/api/v1/stop/{phone_number}</span>
            </div>
            <div class="endpoint">
                <span class="method post">POST</span>
                <span class="path">/sms/api/v1/unregister/{phone_number}</span>
                <p style="margin-top: 0.5rem; color: #666;">Alias for the stop endpoint</p>
            </div>
            
            <p>Opts out a user from SMS service. Works even if the user is not currently registered.</p>
            
            <div class="alert success">
                <strong>Rate Limit:</strong> <span class="badge rate-limit">20 requests/hour</span>
            </div>
        </section>
        
        <section id="timezones">
            <h2>Supported Timezones</h2>
            <p>All timezone codes are case-insensitive.</p>
            
            <h3>US Continental</h3>
            <div class="timezone-list">
                <div class="timezone-item">EST / EDT</div>
                <div class="timezone-item">CST / CDT</div>
                <div class="timezone-item">MST / MDT</div>
                <div class="timezone-item">PST / PDT</div>
            </div>
            
            <h3>Alaska</h3>
            <div class="timezone-list">
                <div class="timezone-item">AKST / AKDT</div>
            </div>
            
            <h3>Hawaii</h3>
            <div class="timezone-list">
                <div class="timezone-item">HST</div>
            </div>
            
            <h3>Puerto Rico</h3>
            <div class="timezone-list">
                <div class="timezone-item">AST</div>
            </div>
            
            <h3>Guam</h3>
            <div class="timezone-list">
                <div class="timezone-item">ChST / GST</div>
            </div>
            
            <h3>Universal</h3>
            <div class="timezone-list">
                <div class="timezone-item">UTC / GMT</div>
            </div>
        </section>
        
        <section id="rate-limiting">
            <h2>Rate Limiting</h2>
            <p>All API endpoints are rate-limited to prevent abuse. Rate limits are enforced per IP address.</p>
            
            <table>
                <tr>
                    <th>Endpoint Type</th>
                    <th>Rate Limit</th>
                </tr>
                <tr>
                    <td>Help / Propagation</td>
                    <td>100 requests/hour</td>
                </tr>
                <tr>
                    <td>Registration</td>
                    <td>10 requests/hour</td>
                </tr>
                <tr>
                    <td>Opt-In/Out</td>
                    <td>20 requests/hour</td>
                </tr>
            </table>
            
            <div class="alert warning">
                <strong>Rate Limit Exceeded:</strong> When you exceed the rate limit, you'll receive a <code>429 Too Many Requests</code> response with headers indicating when you can retry.
            </div>
        </section>
        
        <section id="examples">
            <h2>Code Examples</h2>
            
            <h3>Get Propagation Data (JSON)</h3>
            <pre><code>// JavaScript / Fetch
fetch('https://sms.hampuff.com/sms/api/v1/propagation/EST')
  .then(response => response.json())
  .then(data => console.log(data));

// Python / Requests
import requests
response = requests.get('https://sms.hampuff.com/sms/api/v1/propagation/EST')
data = response.json()
print(data)</code></pre>
            
            <h3>Register User (JSON)</h3>
            <pre><code>// JavaScript / Fetch
fetch('https://sms.hampuff.com/sms/api/v1/register', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    full_name: 'John Doe',
    call_sign: 'W1ABC',
    phone_number: '+15551234567',
    opted_in: true
  })
})
.then(response => response.json())
.then(data => console.log(data));

// Python / Requests
import requests
response = requests.post('https://sms.hampuff.com/sms/api/v1/register', json={
  'full_name': 'John Doe',
  'call_sign': 'W1ABC',
  'phone_number': '+15551234567',
  'opted_in': True
})
data = response.json()
print(data)</code></pre>
            
            <div class="alert info">
                <strong>cURL Examples:</strong> For plain text API examples using cURL, see the <a href="https://github.com/hampuff/hampuff-sms/blob/main/README.md" target="_blank">README.md</a> on GitHub.
            </div>
        </section>
        
        <section id="errors">
            <h2>Error Responses</h2>
            <p>All errors follow a consistent format:</p>
            
            <pre><code>{
  "error": "Error type",
  "message": "Detailed error message",
  // Additional context fields...
}</code></pre>
            
            <h3>HTTP Status Codes</h3>
            <table>
                <tr>
                    <th>Code</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><code>200</code></td>
                    <td>Success</td>
                </tr>
                <tr>
                    <td><code>201</code></td>
                    <td>Created (registration successful)</td>
                </tr>
                <tr>
                    <td><code>400</code></td>
                    <td>Bad Request (invalid input, missing fields)</td>
                </tr>
                <tr>
                    <td><code>404</code></td>
                    <td>Not Found (user not registered for opt-in)</td>
                </tr>
                <tr>
                    <td><code>429</code></td>
                    <td>Too Many Requests (rate limit exceeded)</td>
                </tr>
                <tr>
                    <td><code>500</code></td>
                    <td>Internal Server Error</td>
                </tr>
            </table>
        </section>
    </div>
    
    <footer>
        <p>HamPuff SMS API v1.0.0 | <a href="https://www.hampuff.com">www.hampuff.com</a></p>
        <p>For SMS service, text HELP to the HamPuff SMS number</p>
    </footer>
</body>
</html>

